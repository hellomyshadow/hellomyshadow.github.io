<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Spring,">










<meta name="description" content="SpringMVC新增注解1. Spring4.3中引进了 @GetMapping、@PostMapping、@PutMapping、@DeleteMapping、@PatchMapping     1. @GetMapping 等效于 @RequestMapping(method=RequestMethod.GET);     2. @PostMapping 是 @RequestMapping(">
<meta name="keywords" content="Spring">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot进阶">
<meta property="og:url" content="http://hellomyshadow.github.io/2016/04/02/SpringBoot进阶/index.html">
<meta property="og:site_name" content="大麦田程序猿">
<meta property="og:description" content="SpringMVC新增注解1. Spring4.3中引进了 @GetMapping、@PostMapping、@PutMapping、@DeleteMapping、@PatchMapping     1. @GetMapping 等效于 @RequestMapping(method=RequestMethod.GET);     2. @PostMapping 是 @RequestMapping(">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-06-23T04:06:41.115Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SpringBoot进阶">
<meta name="twitter:description" content="SpringMVC新增注解1. Spring4.3中引进了 @GetMapping、@PostMapping、@PutMapping、@DeleteMapping、@PatchMapping     1. @GetMapping 等效于 @RequestMapping(method=RequestMethod.GET);     2. @PostMapping 是 @RequestMapping(">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://hellomyshadow.github.io/2016/04/02/SpringBoot进阶/">





  <title>SpringBoot进阶 | 大麦田程序猿</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">大麦田程序猿</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hellomyshadow.github.io/2016/04/02/SpringBoot进阶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="大麦田怪圈">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大麦田程序猿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">SpringBoot进阶</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-02T00:00:00+08:00">
                2016-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaEE/" itemprop="url" rel="index">
                    <span itemprop="name">JavaEE</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="SpringMVC新增注解"><a href="#SpringMVC新增注解" class="headerlink" title="SpringMVC新增注解"></a>SpringMVC新增注解</h2><pre><code>1. Spring4.3中引进了 @GetMapping、@PostMapping、@PutMapping、@DeleteMapping、@PatchMapping
    1. @GetMapping 等效于 @RequestMapping(method=RequestMethod.GET);
    2. @PostMapping 是 @RequestMapping(method=RequestMethod.POST) 的缩写;
2. @RestController：相当于 @ResponseBody + @Controller 的组合;
    @RestController
    @RequestMapping(&quot;/user&quot;)
    public class RestController {
        @GetMapping(&quot;/getList&quot;)
        public List&lt;User&gt; getList() {
            List&lt;User&gt; us = dao.findAll();
            return us;
        }
    }
    1. @RestController 的方法都只能返回String、Object、Json等实体对象;
    2. SpringBoot已经引入了jackson, 返回的对象会被jackson转为JSON字符串，写入响应体中;
    3. 如果想要跳转页面，则用 ModelAndView 封装;
    @GetMapping(&quot;/index&quot;)
    public ModelAndView toIndex() {
        ModelAndView mv = new ModelAndView(&quot;index&quot;);
        return mv;
    }
</code></pre><h2 id="lombok"><a href="#lombok" class="headerlink" title="lombok"></a>lombok</h2><pre><code>    &lt;dependency&gt;
        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
        &lt;artifactId&gt;lombok&lt;/artifactId&gt;
        &lt;version&gt;1.18.6&lt;/version&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
1. @Data：注解在Java类上，在编译期自动生成getter、setter... 源码中没有变化，只存在于编译生成的class文件中;
2. @Setter、@Getter：分别生成 setter、getter 方法;
3. @AllArgsConstructor：添加一个构造函数，该构造函数含有所有已声明的属性参数;
4. @NoArgsConstructor：添加一个无参构造函数;
5. @Slf4j：等效于在Java类中创建Logger对象的属性 log=LoggerFactory.getLogger(类名.class);
    1. 日志的输出，如log.info()，依赖于日志相关的包，诸如log4j、slf4j
    2. 在SpringMVC的启动器中，已经包含日志启动器spring-boot-starter-logging
    3. 所以在使用lombok的日志输出功能时，如果没有引入SpringMVC的启动器，则必须引入日志启动器.
6. IDEA并不能自动识别 @Slf4j 提供的变量log，需要安装插件 Settings -&gt; Plugins -&gt; 搜索Lombok
</code></pre><h2 id="Jackson"><a href="#Jackson" class="headerlink" title="Jackson"></a>Jackson</h2><pre><code>1. 常用的JSON框架序列化JSON的性能：Jackson &gt; fastJson &gt; Gson &gt; Json-lib，各有所长，时间换空间、空间换时间;
2. web启动器默认集成了Jackson
    1. @JsonIgnore：指定忽略的字段，不返回给前端;
    2. @JsonFormat(pattern=&quot;yyyy-MM-dd hh:mm:ss&quot;, locale=&quot;zh&quot;, timezone=&quot;GMT+8&quot;)：指定日期格式化;
    3. @JsonInclude(Include.NON_NULL)：空字段不返回;
    4. @JsonProperty：指定别名，隐藏真实的字段名;
    @Data
    public class User {
        @JsonInclude(Include.NON_NULL)
        private Integer id;

        @JsonProperty(&quot;abcd&quot;)
        private String name;

        @JsonIgnore   ------&gt;完全忽略，客户端提交的age参数也会被忽略
        private Integer age;

        private String password;

        @JsonFormat(pattern=&quot;yyyy-MM-dd hh:mm:ss&quot;, locale=&quot;zh&quot;, timezone=&quot;GMT+8&quot;)
        private Date birthday;

        @JsonIgnore  ---&gt; 重写了getter，传递给客户端时忽略
        public String getPassword() {
            return password;
        }
        @JsonProperty  ---&gt; 重写了setter，接收时仍赋值
        public void setPassword(String password) {
            this.password = password;
        }
    }
3. Controller方法
    @RestController
    public class UserController {
        @GetMapping(&quot;/test&quot;)
        public Object test() {
            User user = new User();
            user.setName(&quot;Java&quot;);
            user.setName(&quot;123456&quot;);
            user.setBirthday(new Date())
            return user;  //发送给前端的JSON：{ &quot;abcd&quot;: &quot;123456&quot;, &quot;birthday&quot;: &quot;2019-05-12 07:50:31&quot; }
        }
    }
</code></pre><h2 id="定时任务"><a href="#定时任务" class="headerlink" title="定时任务"></a>定时任务</h2><pre><code>1. @EnableScheduling：注解在启动类上，自动扫描，开启定时任务;
2. @Scheduled：注解在任务方法上;
    @Slf4j
    @Component  --&gt;定时任务类必须加入Spring IoC容器才能被扫描
    public class TestTask {
        @Scheduled(fixedRate=2000)  --&gt;每隔2s执行一次
        public void test() {
            log.info(&quot;当前时间：{}&quot;, new Date());
        }
    }
    1. corn：定时任务表达式，比如 cron=&quot;*/1 * * * * *&quot; 表示每秒执行一次，可以使用在线工具生成corn表达式;
    2. fixedRate：上次开始执行后，xx毫秒后再执行;
        @Scheduled(fixedRate=2000)
        public void test() {
            Thread.sleep(4000);   ---&gt;任务执行时间大于fixedRate，那么每隔 4s 执行一次
        }
    3. fixedDelay：上次任务结束之后，延迟xx毫秒再执行；
        @Scheduled(fixedDelay=2000)
        public void test() {
            Thread.sleep(4000);  --&gt; 任务执行时间4s + 延迟时间2s = 6s  --&gt;每隔6s执行一次
        }
    4. fixedRateString、fixedDelayString：字符串形式，可以把延迟时间配置在SpringBoot的配置文件中;
</code></pre><h2 id="异步任务"><a href="#异步任务" class="headerlink" title="异步任务"></a>异步任务</h2><pre><code>1. @EnableAsync：注解在启动类上，扫描异步任务的注解;
2. @Component：注解在任务类上，加入Spring IoC容器，不能把任务方法写在Controller类中;
3. @Async：注解在任务类或任务方法上，注解在任务类上时，它所有的方法都是异步任务;
    @Slf4j
    @Component
    public class AsyncTask {
        @Async
        public void task1() throws InterruptedException {
            long begin = System.currentTimeMillis();
            Thread.sleep(1000);
            long end = System.currentTimeMillis();
            log.info(&quot;任务-1: {}&quot;, (end-begin));
        }
    }
4. 调用异步任务，不会阻塞主线程
    @Autowired
    private AsyncTask t;

    @GetMapping(&quot;/task&quot;)
    public String task() {
        t.task1();
        return &quot;hello Task!&quot;;  --&gt;响应给前端，不会等待异步任务执行完成
    }
5. 获取异步任务的返回值
    @Async
    public Future&lt;String&gt; task2() throws InterruptedException {
        long begin = System.currentTimeMillis();
        Thread.sleep(2000);
        long end = System.currentTimeMillis();
        log.info(&quot;任务-2: {}&quot;, (end-begin));
        return new AsyncResult&lt;String&gt;(&quot;task2&quot;);
    }
    @Async
    public Future&lt;String&gt; task3() throws InterruptedException {
        long begin = System.currentTimeMillis();
        Thread.sleep(3000);
        long end = System.currentTimeMillis();
        log.info(&quot;任务-3: {}&quot;, (end-begin));
        return new AsyncResult&lt;String&gt;(&quot;task3&quot;);  //返回异步任务执行的结果
    }

    @GetMapping(&quot;/task1&quot;)
    public String task1() {
        Future&lt;String&gt; task2 = t.task2();//执行异步任务
        Future&lt;String&gt; task3 = t.task3();
        for(;;) {
            if(task2.isDone() &amp;&amp; task3.isDone()) { //检查异步任务是否全部执行完成
                break;
            }
        }  ---&gt; 大约耗时：3000，异步任务是同时执行的，所以耗时时间就是执行时间最长的一个异步任务
    }
    @GetMapping(&quot;/task2&quot;)
    public String task2() {
        long begin = System.currentTimeMillis();
        Future&lt;String&gt; task2 = t.task2();
        Future&lt;String&gt; task3 = t.task3();
        String res4 = task4.get();
        String res5 = task5.get();  //阻塞等待获取异步任务的结果
        long end = System.currentTimeMillis();
        System.out.println(&quot;耗时: &quot; + (end-begin)); //大约耗时：3000
    }
</code></pre><h2 id="全局异常"><a href="#全局异常" class="headerlink" title="全局异常"></a>全局异常</h2><pre><code>1. @ControllerAdvice：SpringMVC的注解，作用在类上，声明为异常捕获类;
2. @RestControllerAdvice：组合注解，@ControllerAdvice + @ResponseBody
3. @ExceptionHandler(value=Exception.class)：注解在异常处理的方法上，value属性指定捕获的异常;
    @ControllerAdvice
    public class CustomExtHandler {
        @ExceptionHandler(value=Exception.class)  --&gt;Exception表示捕获所有异常
        @ResponseBody
        Object handleException(Exception e, HttpServletRequest request) {
            Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();
            map.put(&quot;code&quot;, 100);
            map.put(&quot;msg&quot;, e.getMessage());
            map.put(&quot;url&quot;, request.getRequestURL());
            return map;  //当应用程序中发生了异常时，响应给前台的数据
        }
    }
    1. 在Controller中抛出异常
        @GetMapping(&quot;/ply&quot;)
        public String home() {
            int i = 1/0;  -----&gt; 抛出异常
            ......
        }
    2. http://localhost:8080/ply  --&gt; { &quot;code&quot;: 100, &quot;msg&quot;: &quot;...&quot;, &quot;url&quot;: &quot;...&quot; }
4. 自定义异常，跳转到友好界面(引入依赖thymeleaf)
    1. 自定义异常
        public class PageException extends RuntimeException {
            public PageException(String code, String msg) {
                this.code = code;
                this.msg = msg;
            }
            ......
        }
    2. 在 CustomExtHandler 中追加一个新的处理方法，精确捕获自定义异常
        @ExceptionHandler(value = PageException.class)
        @ResponseBody
        Object handleException(PageException e) {
            ModelAndView mav = new ModelAndView();
            mav.setViewName(&quot;error.html&quot;);
            mav.addObject(&quot;msg&quot;, e.getMsg());
            return mav;
        }
    3. 在Controller中抛出自定义异常
        @GetMapping(&quot;/ply&quot;)
        public String home() {
            throw new PageException(&quot;102&quot;, &quot;错误异常&quot;);
        }
</code></pre><h2 id="Servlet3-0"><a href="#Servlet3-0" class="headerlink" title="Servlet3.0"></a>Servlet3.0</h2><pre><code>1. 在SpringBoot项目中，可以使用Servlet3.0的注解开发Filter、Listener、甚至原生Servlet;
2. @ServletComponentScan：注解在启动类上，进行扫描Servlet3.0的注解;
    @ServletComponentScan
    @SpringBootApplication
    public class BootTestApplication {
        ...
    }
3. 过滤器：@WebFilter
    1. Filter在服务器启动时加载，服务器关闭时销毁，SpringBoot启动时默认加载4个Filter
    characterEncodingFilter -&gt; hiddenHttpMethodFilter -&gt; httpPutFormContentFilter -&gt; requestContextFilter
    2. 使用Servlet3.0的注解自定义Filter时，避免和默认的Filter优先级相同，否则会冲突;
    3. 自定义的Filter 必须实现Filter接口，并注解 @WebFilter，用于配置过滤规则，并加入Spring容器;
    @WebFilter(urlPatterns = &quot;/api/*&quot;, filterName = &quot;loginFilter&quot;)
    public class LoginFilter implements Filter {
        init()、destroy()
        public void doFilter(ServletRequest servReq, ServletResponse servResp, FilterChain chain) {
            HttpServletRequest req = (HttpServletRequest)servReq;
            HttpServletResponse resp = (HttpServletResponse)servResp;
            String username = req.getParameter(&quot;username&quot;);
            if(&quot;admin&quot;.equals(username)) {
                chain.doFilter(servletRequest, servletResponse);
            } else {
                resp.sendRedirect(&quot;/error.html&quot;);
            }
        }
    }
4. 自定义原生Servlet：@WebServlet
    @WebServlet(name=&quot;userServlet&quot;, urlPatterns = &quot;/test/user&quot;)
    public class UserServlet extends HttpServlet {
        @Override
        protected void doGet(HttpServletRequest req, HttpServletResponse resp) {
            resp.getWriter().print(&quot;user servlet&quot;);
            resp.getWriter().flush();
            resp.getWriter().close();
        }
    }
5. 自定义原生Listener：@WebListener
    1. 常用监听器：ServletContextListener、HttpSessionListener、ServletRequestListener
    2. ServletContextListener：服务器启动时初始化，常用于一些资源的加载;
    3. ServletRequestListener：一次请求，请求到达则初始化，响应结束则销毁;
    @WebListener
    public class RequestListener implements ServletRequestListener {
        public void requestDestroyed(ServletRequestEvent servletRequestEvent) {
            System.out.println(&quot;RequestListener requestDestroyed&quot;);
        }
        public void requestInitialized(ServletRequestEvent servletRequestEvent) {
            System.out.println(&quot;RequestListener requestInitialized&quot;);
        }
    }
</code></pre><h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><pre><code>    public class LoginIntercepter implements HandlerInterceptor {
        preHandle()   --&gt;调用Controller方法之前
        postHandle()  --&gt;Controller方法调用之后，视图渲染之前，如果Controller方法出现异常，则不会执行
        afterCompletion()  --&gt;不管是否有异常，都会执行，常用于资源清理
    }
1. SpringBoot规定：
    1. 如果要保留SpringBoot的一些默认MVC特征，同时又想自定义一些MVC配置，如拦截器、格式化器、视图控制器、
    消息转发器... 就必须实现WebMvcConfigurer，并使用 @Configuration，但一定不能使用 @EnableWebMvc;
    2. 如果想要完全自定义SpringMVC，不保留默认的一切MVC特征，则使用 @Configuration 和 @EnableWebMvc;
2. SpringBoot2.0的拦截器与v2.0之前的配置方式是不同的
    1. 旧版本：extends WebMvcConfigurerAdapter
    @Configuration
    public class OldCusWebMvcConfigurer extends WebMvcConfigurerAdapter {
        public void addInterceptors(InterceptorRegistry registry) {
            //配置拦截器和拦截规则，Ant风格的路径匹配
            registry.addInterceptor(new LoginIntercepter()).addPathPatterns(&quot;/api2/*/**&quot;);
        }
    }
    2. 新版本：implements WebMvcConfigurer
    @Configuration
    public class CusWebMvcConfigurer implements WebMvcConfigurer {
        //配置拦截器和拦截规则
        registry.addInterceptor(new LoginIntercepter())
            .addPathPatterns(&quot;/api2/*/**&quot;)  ----&gt;拦截的资源访问
            .excludePathPatterns(&quot;/api2/xxx/**&quot;);  --&gt;某些不需要拦截的资源访问

        registry.addInterceptor(new LoginIntercepter()).addPathPatterns(&quot;/api2/*/**&quot;);
    }
    3. 配置多个拦截器时，拦截器的执行顺序与配置顺序相同;
3. 拦截器与过滤器
    1. 过滤器依赖于Servlet容器(Web应用)，基于函数回调；而拦截器则不依赖，基于Java的反射机制(AOP)；
    2. 拦截器中可以注入Spring IoC容器的所有Bean对象，实现业务逻辑的调用，而过滤器则不行；
    3. 执行顺序
        Filter --&gt; 拦截器 --&gt; action执行 --&gt; 拦截器 --&gt; 过滤器
</code></pre><h2 id="连接池"><a href="#连接池" class="headerlink" title="连接池"></a>连接池</h2><pre><code>1. DBCP是一款老牌的JDBC连接池，出自Apache;
2. cp30与Druid都是连接池，一个JDBC组件，速度都差不多;
    1. Hibernate默认使用c3p0;
    2. Druid可以监控每一条SQL语句的执行性能，从而优化SQL语句.
3. 速度最快的JDBC连接池是HikariCP(追光者)，Spring默认内置了HikariCP;
4. Spring提供的JDBC启动器：spring-boot-starter-jdbc，SpringBoot默认集成，无需手动引入;
5. 连接池只是一个JDBC组件，还需要配置数据库驱动，如MySQL的驱动依赖：mysql-connector-java
6. 在 application.yml 中，配置Spring启动器中的默认连接池：连接数据库的4大参数;
    spring:
        datasource:
            driver-class-name: com.mysql.cj.jdbc.Driver
            url: jdbc:mysql://host:port/database?serverTimezone=Asia/Shanghai
            username: root
            password: 123456
7. 默认使用的连接池是HikariCP，如果想使用其他连接池，如阿里的druid
    1. 引入druid的依赖，配置spring.datasource.type=com.zaxxer.hikari.HikariDataSource
    spring:
        datasource:
            type: com.alibaba.druid.pool.DruidDataSource
            ...... # driver-class-name、url、username、password
</code></pre><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><pre><code>1. Junit的起步依赖：spring-boot-starter-test
2. 在test目录下创建测试类
    @RunWith(SpringRunner.class)
    @SpringBootTest(classes=引导类.class)
    public class TestClient {
        @Autowired
        private IUserMapper userMapper;  //注入Mapper对象

        @Test
        public void test() {
            List&lt;User&gt; users = userMapper.findAll();
        }
    }
3. MockMvc：模拟 SpringMVC 的客户端请求
    @AutoConfigureMockMvc   ----&gt;MockMvc的注解
    @RunWith(SpringRunner.class)
    @SpringBootTest(classes={启动类.class})
    public class TestClient {
        @Autowired
        private MockMvc mvc;

        @Test
        public void test() {
            MvcResult res = mvc.perform(MockMvcRequestBuilders.get(&quot;/ply&quot;))
                .andExpect(MockMvcResultMatchers.status().isOk()).andReturn();  //发起get请求
            String str = res.getResponse().getContentAsString();  //获取请求的内容
        }
    }
</code></pre><hr>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Spring/" rel="tag"># Spring</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/04/01/SpringBoot/" rel="next" title="SpringBoot">
                <i class="fa fa-chevron-left"></i> SpringBoot
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/04/03/SpringBoot整合/" rel="prev" title="SpringBoot整合">
                SpringBoot整合 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">大麦田怪圈</p>
              <p class="site-description motion-element" itemprop="description">敢做就能赢！</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">65</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringMVC新增注解"><span class="nav-number">1.</span> <span class="nav-text">SpringMVC新增注解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lombok"><span class="nav-number">2.</span> <span class="nav-text">lombok</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Jackson"><span class="nav-number">3.</span> <span class="nav-text">Jackson</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#定时任务"><span class="nav-number">4.</span> <span class="nav-text">定时任务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#异步任务"><span class="nav-number">5.</span> <span class="nav-text">异步任务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#全局异常"><span class="nav-number">6.</span> <span class="nav-text">全局异常</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Servlet3-0"><span class="nav-number">7.</span> <span class="nav-text">Servlet3.0</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#拦截器"><span class="nav-number">8.</span> <span class="nav-text">拦截器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#连接池"><span class="nav-number">9.</span> <span class="nav-text">连接池</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#测试"><span class="nav-number">10.</span> <span class="nav-text">测试</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">大麦田怪圈</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
